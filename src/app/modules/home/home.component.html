<app-loader *ngIf="this.isLoading"></app-loader>

<div class="container" fxLayout="column" fxLayoutGap="15px" fxLayoutGap.gt-md="25px" *ngIf="!this.isLoading">

	<div fxLayout="row" fxLayoutGap="15px" fxLayoutGap.gt-md="25px">

		<!-- recent posts -->
		<div fxLayout="column" fxFlex="30" fxFlex.md="50" fxFlex.lt-md="100" fxLayoutAlign="start" [@listAnimation1]="posts.length">

			<mat-card class="mat-elevation-z6">

				<mat-card-header fxLayout="column">
					<h2 class="title">Recent Posts</h2>
				</mat-card-header>

				<mat-card-content fxLayout="column" fxLayoutGap="15px">
					<fieldset class="posts" fxLayout="column" fxFlex *ngFor="let item of posts | orderByImpure: '-pubDate'">
						<legend fxLayout="row" fxLayoutAlign="space-between center">
							<mat-icon class="orange" aria-hidden="false">article</mat-icon>
							{{ this.toDate(item.pubDate) | timeAgo | wrap: 'Posted ': ' on' }} <span class="platform orange">{{item.source}}</span>
						</legend>
						<div class="title">
							{{item.title | shorten: 125: '...'}}
						</div>
						<img class="image" *ngIf="item.thumbnail" src="{{item.thumbnail}}" />
						<div fxLayout="row" fxFill>
							<a fxFlex color="accent" mat-stroked-button type="button" [href]="item.link" target="_blank">Open {{item.source}}</a>
						</div>
					</fieldset>
				</mat-card-content>

			</mat-card>

		</div>

		<!-- articles -->
		<div fxLayout="column" fxFlex="70" fxFlex.md="50" fxLayoutAlign="start" fxHide.lt-md>

			<div fxLayout="row" [@listAnimation2]="posts.length">
				<mat-card class="mat-elevation-z6">
					<mat-card-header fxLayout="column">
						<h2 class="title">Social Feed</h2>
					</mat-card-header>
					<mat-card-content>
						<div *ngFor="let item of posts | orderByImpure: '-pubDate'">
							<div class="date orange">
								{{ this.toDate(item.pubDate) | timeAgo | wrap: 'Posted ': ' on' }} {{item.source}} {{item.author | wrap: 'By '}}
							</div>
							<p class="description" [innerHTML]="item.description | stripTags: 'p'"></p>
							<p *ngIf="item.description === ''" class="description" [innerHTML]="item.title | stripTags: 'p'"></p>
							<div class="break"></div>
						</div>
					</mat-card-content>
				</mat-card>
			</div>

		</div>

	</div>

</div>