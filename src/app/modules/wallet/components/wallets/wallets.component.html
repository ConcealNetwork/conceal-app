<div [ngClass]="{'emulated-flex-gap' : this.getThemingService().isSmallScreen}" fxLayout="row wrap" fxLayoutGap="0px" fxLayoutGap.gt-sm="15px grid" [@listAnimation]="this.wallets" @transition>

	<div [fxFlex]="(100/this.getThemingService().walletGridColumns) + '%'" fxFlex="100%">
		<mat-card id="cards" class="mat-elevation-z6">

			<mat-card-header fxLayout="column">
				<h2 class="title">My Portfolio</h2>
			</mat-card-header>

			<mat-card-content fxLayout="column">
				<div class="portfolio"  fxLayout="column" fxLayoutAlign="space-evenly stretch" fxLayoutGap="10px">
					<div fxLayout="row" fxFlex="25">
						<span>$ {{getHelperService().formatAmount(this.portfolioUSD, 2, 2) || 0}}</span>
					</div>
					<div fxLayout="row" fxFlex="25">
						<span>â‚¿ {{getHelperService().formatAmount(this.portfolioBTC, 8, 8) || 0}} </span>
					</div>
					<div fxLayout="row" fxFlex="25">
						<span>{{getHelperService().formatAmount(this.portfolioCCX, 1, 6) || 0}} CCX</span>
					</div>
				</div>
			</mat-card-content>

			<mat-card-actions fxLayout="column" fxLayoutAlign="stretch">
				<div class="actions" fxLayout="row" fxLayoutAlign="start" fxLayoutGap="15px">
					<button color="accent" mat-flat-button routerLink="/deposits">Deposits</button>
					<button color="accent" mat-flat-button (click)="this.createWallet()" [disabled]="isLoading" *ngIf="this.activeWallets < this.activeWalletsLimit">Create Wallet</button>
				</div>
			</mat-card-actions>

		</mat-card>
	</div>

	<div [fxFlex]="(100/this.getThemingService().walletGridColumns) + '%'" fxFlex="100%" *ngFor="let item of this.wallets | keyvalue">
		<mat-card class="mat-elevation-z6">

			<mat-card-header fxLayout="column">
				<div fxLayout="row" fxLayoutAlign="space-between center">
					<h2 class="title">{{ this.getHelperService().formatAddress(item.key) }}</h2>
					<button color="accent" mat-icon-button [matMenuTriggerFor]="menu" aria-label="Options">
						<mat-icon>more_vert</mat-icon>
					</button>
					<mat-menu #menu="matMenu">
						<button mat-menu-item (click)="this.getHelperService().copyToClipboard(item.key, 'Address copied to clipboard')">
							<mat-icon color="accent">content_copy</mat-icon>
							<span>Copy Address</span>
						</button>
						<button mat-menu-item (click)="this.getDialogService().openQrcodeDialog(item.key)">
							<mat-icon color="accent">qr_code</mat-icon>
							<span>Show QR Code</span>
						</button>
						<button mat-menu-item (click)="this.getDialogService().openExportDialog(item.key)">
							<mat-icon color="accent">vpn_key</mat-icon>
							<span>Export Keys</span>
						</button>
						<button mat-menu-item (click)="this.deleteWallet(item.key,item.value.total)" [disabled]="isLoading">
							<mat-icon color="warn">delete</mat-icon>
							<span>Delete Wallet</span>
						</button>
					</mat-menu>
				</div>
			</mat-card-header>

			<mat-card-content fxLayout="column">
				<div fxLayout="column" fxLayoutAlign="space-evenly stretch" fxLayoutGap="10px">
					<div fxLayout="row" fxFlex="25" fxLayoutAlign="space-between stretch">
						<span>Available</span>
						<span class="amount">{{ this.getHelperService().formatAmount(item.value.total, 6, 6) }} CCX</span>
					</div>
					<div fxLayout="row" fxFlex="25" fxLayoutAlign="space-between stretch">
						<span>Pending</span>
						<span class="amount">{{ this.getHelperService().formatAmount(item.value.locked, 6, 6) }} CCX</span>
					</div>
					<div fxLayout="row" fxFlex="25" fxLayoutAlign="space-between stretch">
						<span>Withdrawable</span>
						<span class="amount">{{ this.getHelperService().formatAmount(item.value.balance, 6, 6) }} CCX</span>
					</div>
				</div>
			</mat-card-content>

			<mat-card-actions fxLayout="column" fxLayoutAlign="stretch">
				<div class="actions" fxLayout="row" fxLayoutAlign="start" fxLayoutGap="15px">
					<button color="accent" mat-flat-button (click)="this.getDialogService().openSendDialog(item)">Send Funds</button>
				</div>
			</mat-card-actions>

		</mat-card>
	</div>

</div>

